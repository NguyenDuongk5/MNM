<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Trang chủ</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- CSS -->
<link rel="stylesheet" href="../../CSS/project.css">
</head>


<!-- TOPBAR -->
<div class="topbar">
    <div>
        <i class="bi bi-person-circle"></i> Xin chào, <span id="userName"></span>
    </div>
    <a onclick="logout()" class="btn btn-danger">Đăng xuất</a>
    
</div>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebarMenu">
    <a href="user.html"><i class="bi bi-house-door"></i> Trang chủ</a>
    <a href="../Nguoidung/duan.html"><i class="bi bi-kanban"></i> Dự án của tôi</a>
    <a href="../Nguoidung/thongbao.html"><i class="bi bi-bell"></i> Thông báo</a>
    <a href="../Nguoidung/chinhsuatk.html"><i class="bi bi-gear"></i> Cài đặt tài khoản</a>
</div>

<!-- CONTENT -->
<div class="content-area">

    <!-- HERO -->
    <section class="hero">
        <div class="row align-items-center gy-4">
            <div class="col-lg-6">
                <h1 class="hero-title">
                    Project – Nền tảng quản lý dự án hiện đại
                </h1>
                <p class="hero-sub">
                    Nơi các nhóm có thể quản lý công việc, lưu trữ thông tin và cộng tác theo thời gian thực.
                </p>
            </div>

            <div class="col-lg-6">
                <div class="app-mock">
                    <div class="d-flex">
                        <aside class="sidebar me-3 d-none d-md-block"
                               style="position:unset; height:auto; box-shadow:none; background:#f8f9fa;">
                            <div class="mb-3">
                                <small class="text-muted">Project</small>
                            </div>
                            <div class="d-flex flex-column gap-1">
                                <div class="page-item active">Trang chủ</div>
                                <div class="page-item">Dự án</div>
                                <div class="page-item">Thông báo</div>
                                <div class="page-item">Bài viết</div>
                            </div>
                        </aside>

                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between mb-3">
                                <h6 class="mb-0">Dự án của bạn</h6>
                                <small id="joinStatus" class="text-muted"></small>
                            </div>

                            <div class="row gx-2 gy-2">
                                <div class="col-6">
                                    <div class="p-3 bg-light rounded">Tạo bài viết</div>
                                </div>
                                <div class="col-6">
                                    <div class="p-3 bg-light rounded">Ghi chú</div>
                                </div>
                                <div class="col-12">
                                    <div class="p-3 bg-light rounded">Quản lí bài viết</div>
                                </div>
                            </div>

                            <div class="d-flex gap-2 mt-3">
                                <button class="btn btn-sm btn-outline-secondary">Chia sẻ</button>
                                <button class="btn btn-sm btn-outline-secondary">Trả lời</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- DỰ ÁN -->
    <section id="myProjectsSection" class="py-5">
        <h3 class="mb-4">Dự án của tôi</h3>

        <div class="row g-4" id="projectList"></div>

        <div class="mt-4">
            <a href="../Nguoidung/duan.html" class="btn btn-primary">Xem thêm</a>
        </div>
    </section>
    <!-- TẤT CẢ DỰ ÁN -->
    <section class="py-5">
        <h3 class="mb-4">Tất cả dự án</h3>
        <div class="row g-4" id="allProjectList"></div>
    </section>

    <div id="loadingMore" class="text-center py-3 d-none">
        <div class="spinner-border text-primary" role="status"></div>
        <div class="small text-muted mt-2">Đang tải dự án...</div>
    </div>

</div>

<script src="../../JS/auth.js"></script>
<script>
    protectPage("user");
</script>
<script src="../../JS/project.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const userData = JSON.parse(localStorage.getItem("currentUser"));

    if (!userData) {
        window.location.href = "/HTML/Trangchung/login.html";
        return;
    }

    // Trường hợp bạn lưu dạng { user: {...} }
    const user = userData.user || userData;

    document.getElementById("userName").innerText = user.hoten || user.tendangnhap;
});
</script>
</body>
</html>
