<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Dự án của tôi</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../../CSS/duan.css">
</head>

<body>

<!-- ===== TOPBAR ===== -->
<div class="topbar">
    <div>
        <i class="bi bi-person-circle"></i> Xin chào, <span id="userName"></span>
    </div>
    <a href="../Trangchung/login.html" class="btn btn-danger">Đăng xuất</a>
</div>

<!-- ===== SIDEBAR ===== -->
<div class="sidebar">
    <a href="../Trangchung/user.html">
        <i class="bi bi-house-door"></i> Trang chủ
    </a>
    <a href="duan.html" class="active">
        <i class="bi bi-kanban"></i> Dự án của tôi
    </a>
    <a href="thongbao.html">
        <i class="bi bi-bell"></i> Thông báo
    </a>
    <a href="chinhsuatk.html">
        <i class="bi bi-gear"></i> Cài đặt tài khoản
    </a>
</div>

<!-- ===== CONTENT ===== -->
<div class="content-area">

    <!-- NÚT TẠO DỰ ÁN -->
    <div class="text-end mb-4">
        <button class="btn-create-project" data-bs-toggle="modal" data-bs-target="#createProjectModal">
            <i class="bi bi-plus-circle"></i> Tạo dự án mới
        </button>
    </div>

    <!-- ===== DANH SÁCH DỰ ÁN ===== -->
    <section class="py-3">
        <h4 class="mb-4 fw-bold">Dự án bạn đang tham gia</h4>

        <div class="row g-4" id="projectList"></div>

    </section>
    <section class="py-3">
        <h4 class="mb-4 fw-bold">Dự án của tôi</h4>
        <div class="row g-4" id="myProjectList"></div>
    </section>

</div>

<!-- ===== MODAL TẠO DỰ ÁN ===== -->
<div class="modal fade" id="createProjectModal">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content p-3">

    <div class="modal-header border-0">
        <h5 class="fw-bold">Tạo dự án mới</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
    </div>

    <div class="modal-body">
        <label class="fw-semibold">Tên dự án</label>
        <input id="tenDuAn" type="text" class="form-control mb-3" placeholder="Nhập tên dự án...">

        <label class="fw-semibold">Mô tả</label>
        <textarea id="moTa" class="form-control mb-3" rows="3" placeholder="Mô tả dự án..."></textarea>

        <label class="fw-semibold mb-2">Chọn màu</label>
        <div class="color-options">
            <span class="color-box red" data-color="#FF8484"></span>
            <span class="color-box blue" data-color="#23AFFF"></span>
            <span class="color-box yellow" data-color="#FFDB5C"></span>
            <span class="color-box pink" data-color="#FF85C1"></span>
        </div>
    </div>
    <div class="modal-footer border-0">
        <button class="btn btn-primary" onclick="createProject()">Tạo dự án</button>

    </div>

</div>
</div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
    const userData = JSON.parse(localStorage.getItem("currentUser"));

    if (!userData) {
        window.location.href = "/HTML/Trangchung/login.html";
        return;
    }

    // Trường hợp bạn lưu dạng { user: {...} }
    const user = userData.user || userData;

    document.getElementById("userName").innerText = user.hoten || user.tendangnhap;
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="../../JS/project.js"></script>

</body>
</html>
